<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<title>Disaster Mapper Submit</title>
<meta http-equiv="Content-Language" content="en-us" />
<meta name="author" content="Your Name Goes Here" />

<!-- <style type="text/css" media="all"> -->

<link href="css/style.css" rel="stylesheet" type="text/css" media="screen" />

</style>
   
</head>

<body>
<!--  Page content goes here -->

<div id="wrapper">

	<div id="top">
	
		<div id="logo">
			<p class="logo">
			<a href="displaypage.html">
			<img class="logo" src="images/logo1.png" alt="Loco Logo" width="100px" height="100px"/>
			</a>
			</p> 
		<h1> Disaster Mapper</h1>
		</div>

	<div id="topnav" class="wrap">
	<ul id="nav">
		<li><a href="displaypage.html">Map</a></li>
		<li><a href="submitpage.html">Submit a Picture</a></li>
        <li><a href="about.html">About</a>
        <!--	<ul>
            <li><a href="#">Hardware</a></li>
            <li><a href="#">Software</a></li>
            <li><a href="#">Accessories</a></li>
            <li><a href="#">Reviews</a></li>
			<li><a href="#">Community</a></li>
            </ul> USE THIS LIST IF YOU WANT A DROPDOWN MENU-->
        </li>

	</ul>
	</div>
	
	</div>
</div> <!-- end of wrapper div-->
	
<div id="content-wrapper">
		
	<div id="content">
	<center><h1> This is the HEADER of the submit page </h1></center>
	
		<div id="leftside">
		<img src="images/flood.jpg" width="300" height="200px" alt="To do pic" />
		
		<img src="images/wildfire.jpeg" width="300" height="200px" alt="To do pic" />
		<p> Two examples of suitable pictures </p>
		</div>
		
		<div id="rightside">
		<br/><br/><br/><br/><br/>
		<!-- start form code -->
		<form id="submitpage" action="/submitsuccess" onsubmit="return validateForm()" method="post" enctype="multipart/form-data">
		
		<input type="file" onchange="previewFile()"><br/><br/>
		
		Description: <input type="text" name="descrip"><br/><br/>
		
		<img src="picsub" height="200" alt="Image preview..."><br/><br/>
		
		<input type="submit" onclick="myFunction()" value="Submit">
		</form>
<!-- start script -->
<script>
function myFunction() {
    document.getElementById("submitpage").submit();
    getLocation();                                    
}
function previewFile() {
  var preview = document.querySelector('img');
  var file    = document.querySelector('input[type=file]').files[0];
  var reader  = new FileReader();

  reader.onloadend = function () {
    preview.src = reader.result;
  }

  if (file) {
    reader.readAsDataURL(file);
  } else {
    preview.src = "";
  }
}
function validateForm() {
    var x = document.forms["submitpage"]["descrip"].value;
    if (x == "") {
        alert("Description must be filled out");
        return false;
    }
}
var y = document.getElementById("submitpage");
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(info, showError);
    } else { 
        y.innerHTML = "Geolocation is not supported by this browser.";
    }
}
function info(position){
    var lat = position.coords.latitude;
    var lon = position.coords.longitude;
    var time = position.timestamp;
    y.innerHTML= "Location was saved.";
}
function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            y.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            y.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            y.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            y.innerHTML = "An unknown error occurred."
            break;
    }
}
</script>
		</div>
	
    </div>
</div> <!--  end of content-wrapper div -->
</body>

</html>